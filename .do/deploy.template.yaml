spec:
  name: do-actions-runner
  workers:
  - dockerfile_path: Dockerfile
    envs:
    - key: TOKEN
      scope: RUN_TIME
      type: SECRET
      value: EV[GITHUB_PAT]
    - key: OWNER
      scope: RUN_TIME
      value: EV[GITHUB_OWNER]
    - key: REPO
      scope: RUN_TIME
      value: EV[GITHUB_REPO]
    - key: NAME
      scope: RUN_TIME
      value: runner
    git:
      branch: main
      repo_clone_url: https://github.com/rub-a-dub-dub/do-actions-runner.git
    instance_count: 1
    instance_size_slug: apps-s-2vcpu-4gb
    name: runner
  - dockerfile_path: autoscaler/Dockerfile
    envs:
    - key: GITHUB_TOKEN
      scope: RUN_TIME
      type: SECRET
      value: EV[GITHUB_PAT]
    - key: DO_API_TOKEN
      scope: RUN_TIME
      type: SECRET
      value: EV[DO_API_TOKEN]
    - key: APP_ID
      scope: RUN_TIME
      value: EV[DO_APP_ID]
    - key: OWNER
      scope: RUN_TIME
      value: EV[GITHUB_OWNER]
    - key: REPO
      scope: RUN_TIME
      value: EV[GITHUB_REPO]
    - key: WORKER_NAME
      scope: RUN_TIME
      value: runner
    - key: MIN_INSTANCES
      scope: RUN_TIME
      value: "1"
    - key: MAX_INSTANCES
      scope: RUN_TIME
      value: "5"
    - key: POLL_INTERVAL
      scope: RUN_TIME
      value: "60"
    - key: SCALE_UP_COOLDOWN
      scope: RUN_TIME
      value: "60"
    - key: SCALE_DOWN_COOLDOWN
      scope: RUN_TIME
      value: "180"
    - key: SCALE_UP_THRESHOLD
      scope: RUN_TIME
      value: "1.5"
    - key: SCALE_DOWN_THRESHOLD
      scope: RUN_TIME
      value: "0.25"
    - key: STABILIZATION_WINDOW
      scope: RUN_TIME
      value: "3"
    git:
      branch: main
      repo_clone_url: https://github.com/rub-a-dub-dub/do-actions-runner.git
    instance_count: 1
    instance_size_slug: apps-s-1vcpu-0.5gb
    name: autoscaler
